<!DOCTYPE html>
<html>
	<head>
		<title>Twitter Haikus</title>
		<style type='text/css'>
			html, body {
				width:100%;
				height:100%;
				background:#ccc;
				font-family: Arial, sans-serif;
				font-size:1.5em;
			}
			h1 {
				text-shadow:#999 -5px 0;
			}
			

		</style>
		<script type='text/javascript'>
			window.onload = function() {
				var recent = document.getElementById('recent'),
					random = document.getElementById('random');
			//		ws = new WebSocket('ws://'
			//			+ window.location.hostname 
			//			+ ':'	
			//			+ (parseInt(window.location.port, 10) + 1));

				function requestUpdate() {
					var	req = new XMLHttpRequest();
					req.open('get', 'poll', true);
					req.onload = function(event) {	
//				ws.onopen = function(event) {
//					console.log(event);
//				}
//				ws.onmessage = function(event) {
						var data = JSON.parse(event.target.response);	
						recent.innerHTML = data.recent;
						random.innerHTML = data.random;
						setTimeout(requestUpdate, 10000);
					};

					req.send();
				}
				requestUpdate();
			};
		</script>
	</head>
	<body>
		<h1>Recent Haiku</h1>
		<blockquote id='recent'></blockquote>

		<h1>Random Haiku</h1>
		<blockquote id='random'></blockquote>
	</body>
</html>
